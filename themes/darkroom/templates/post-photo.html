{% extends "base.html" %}

{% block page_title %}
{% if post.title %}{{ post.title }} 路 {{ config.title | default("darkroom") }}{% else %}{{ config.title | default("darkroom") }}{% endif %}
{% endblock page_title %}

{% block page_meta %}
{% set canonical = base_url ~ post.permalink %}
<meta name="description" content="{{ post.abstract | default(post.excerpt) | trim }}">
<meta property="og:site_name" content="{{ config.title | default("darkroom") }}">
<meta property="og:type" content="article">
<meta property="og:title" content="{{ post.title | default(config.title | default("darkroom")) | trim }}">
<meta property="og:url" content="{{ canonical | safe }}">
<meta property="og:description" content="{{ post.abstract | default(post.excerpt) | trim}}">
<link rel="canonical" href="{{ canonical | safe }}">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ post.title | default(config.title | default("darkroom")) | trim }}">
<meta name="twitter:description" content="{{ post.abstract | default(post.excerpt) | trim }}">
{% if post.image %}
<meta property="og:image" content="{{ canonical | safe}}{{ post.image }}"/>
<meta name="twitter:image" content="{{ canonical | safe}}{{ post.image }}"/>
{% endif %}
{% endblock page_meta %}

{% block content %}
<article class="photo-post">
{% if post.image %}
<div class="photo-container">
<img src="{{ post.permalink | safe }}{{ post.image }}" alt="{{ post.title | default('Photo') }}">
</div>
{% endif %}

<div class="photo-meta">
{% if post.title %}<h2>{{ post.title }}</h2>{% endif %}
<time datetime="{{ post.date_iso }}">{{ post.date }}</time>

{% if post.camera or post.lens or post.aperture_friendly or post.exposure_friendly or post.focal_length_friendly or post.iso %}
<div class="exif-data">
{% if post.camera %}<span class="camera">{{ post.camera }}</span>{% endif %}
{% if post.lens %}<span class="lens">{{ post.lens }}</span>{% endif %}
{% if post.aperture_friendly or post.exposure_friendly or post.focal_length_friendly or post.iso %}
<span class="settings">
{% if post.aperture_friendly %}{{ post.aperture_friendly }}{% endif %}{% if post.exposure_friendly and post.aperture_friendly %} 路 {% endif %}{% if post.exposure_friendly %}{{ post.exposure_friendly }}{% endif %}{% if (post.aperture_friendly or post.exposure_friendly) and post.focal_length_friendly %} 路 {% endif %}{% if post.focal_length_friendly %}{{ post.focal_length_friendly }}{% endif %}{% if (post.aperture_friendly or post.exposure_friendly or post.focal_length_friendly) and post.iso %} 路 {% endif %}{% if post.iso %}ISO {{ post.iso }}{% endif %}
</span>
{% endif %}
</div>
{% endif %}

{% if post.tags %}
<div class="tags">
{% for tag in post.tags %}<a href="/tags/{{ tag | replace(' ', '-') | lower }}/">#{{ tag }}</a>{% if not loop.last %} {% endif %}{% endfor %}
</div>
{% endif %}

{% if post.body %}
<div class="description">
{{ post.body | safe }}
</div>
{% endif %}
</div>
</article>
{% endblock content %}
